<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" href="css/bootstrap.css">

	<meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

	<!--First we load the cordova script, then we load index to take care of initializing the estimotes-->
	<script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>

	<!--jquery & angular scripts are loaded before any other scripts that depend on them-->
	<script src="js/jquery-2.1.3.js"></script>
	<script src="js/angular.min.js"></script>

	<!--Routing and animations-->
	<script src="js/angular-route.min.js"></script>
	<script src= "js/angular-animate.min.js"></script>

	<!--Angular-Isotope scripts-->
	<script src="js/jquery.isotope.js"></script>
	<script src="js/angular-isotope.js"></script>
	<script src="http://yandex.st/highlightjs/8.0/highlight.min.js"></script>
	<script src="http://pc035860.github.io/angular-highlightjs/angular-highlightjs.min.js"></script>

	<!--Our app controllers-->
	<script src="js/app.js"></script>
	<script src="js/bootstrap.min.js"></script>

	<!--Estimotes and touch events-->
	<script src= "js/screen-range-beacons.js"></script>
	<script src= "js/hammer.min.js"></script>
	<script src= "js/localStorage.js"></script>

	<!--twitter-->
	<script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script>

	<script>

		//Desktop testing for beacons
		
        function onRange(foo)
		{
			$(".beacon").hide();
			var c;
				$.each(pieces, function(i, v){
				if(foo == v.beaconID) c = v;
			})
			if(window.location.href.indexOf('explore') > -1){
				window.location.hash = "/piece/" + c.id;
			}else if(window.location.href.indexOf('gallery') > -1){
				console.log($(".row:contains(" + c.piece_title + ")"));
				$(".row:contains(" + c.piece_title + ") .beacon").show();
			}
		}
		//Data setup
		var pieces = [];
		var data = $.ajax({
		  dataType: "json",
		  url: "js/data.json",
		  success: function(){
		  	$.each(data.responseJSON,function(){
				//todo: add a placeholder image if there wasnt a url
		  		if(this.piece_image != ""){
		  			this.image_url = /http:.+?(?=.jpg)(....)/.exec(this.piece_image)[0];
		  			this.thumb_url = this.piece_image.match(/image\d{1,2}.\d{3,4}x\d{3,4}..../g);
		  			var currentPiece = this;
		  			if(this.thumb_url != null){
			  			$.each(this.thumb_url, function(i, v){
			  				currentPiece.thumb_url[i] =  /http:.+?(?=.image\d{1,2})/.exec(currentPiece.image_url)[0] + "/" + currentPiece.thumb_url[i];
			  			})
		  			}
		  		}else{
		  			this.piece_image == "";
		  			this.thumb_url == "";
		  		}
		  		pieces.push(this);
		  	})
		  }
		});
		//Click and swipe events
		$(document).ready(function(){
			var h = $("html")[0];
			var close = Hammer(h,{threshold: 4, velocity:.1}).on("swipeleft", function() {
	   			$("#dropdown-menu").show();
			});
			var open = Hammer(h,{threshold: 4, velocity:.1}).on("swiperight", function() {
	   			$("#dropdown-menu").hide();
			});
			$("#dropdown-menu a").click(function(){$("#dropdown-menu").hide()});
			$("#close-btn").click(function(){$("#dropdown-menu").hide()});
			$("#menu-btn").click(function(){$("#dropdown-menu").show()});

		});

	</script>
	<!--Style Sheets-->
	<link href='http://fonts.googleapis.com/css?family=Oswald|Open+Sans' rel='stylesheet' type='text/css'>
    
    <link rel="stylesheet" href="css/masterLight.css">
    <link rel="stylesheet" href="css/stylesBlue.css">
	
</head>
<body ng-app="app">
	<!--<div id="dropdown-menu" class="accelerate">
		<h2><a href="#/explore">EXPLORE</a></h2>
		<h2><a href="#/gallery">LIST VIEW</a></h2>
		<h2><a href="#/tileView">TILE VIEW</a></h2>
		<h2><a href="#/tutorial">TUTORIAL</a></h2>
		<h2><a href="#/settings">SETTINGS</a></h2>
		<h2><a href="#/about">ABOUT</a></h2>
		<div id="close-btn">
		<span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
		</div>
	</div>-->
	<div ng-view id="view-container" class="center"></div>

<!--<div id="menu-btn">
	<span class="glyphicon glyphicon-menu-hamburger" aria-hidden="true"></span>
</div>-->
     <div id="menu">
     
    <img id="menuButton" src="https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/BYR_color_wheel.svg/2000px-BYR_color_wheel.svg.png"/>

    <a href="#/explore"><img id="menuItem1" src="http://orig05.deviantart.net/4489/f/2015/220/1/2/png_de_emojis_del_poop_by_dubraskaedicion-d94sqz7.png"></a>

    <a href="#/map"><img id="menuItem2" src="http://www.veryicon.com/icon/png/Holiday/Iconfactory%20Thanksgiving%202008/Corn.png"></a>

    <a href="#tileView"><img id="menuItem3" src="http://whatwouldronsay.com/img/ron-2.png"></a>

  </div>
<div class="bottom-nav ng-scope">
    <a href="#/explore"><img src="img/explore.png"></a>
    <a href="#/map"><img src="img/map.png"></a>
    <a href="#tileView"><img src="img/gallery.png"></a>
    <a href="#/settings"><img src="img/settings.png"></a>
    </div>
    
    <script>var open = false;

$("#menuButton").click(function(){
  
  if(open == false){
    $("#menuItem1").toggleClass("menuItems1");     
    $("#menuItem2").toggleClass("menuItems2"); 
    $("#menuItem3").toggleClass("menuItems3"); 
    
    open = true;
  }
  
  else{
    $("#menuItem1").toggleClass("menuItemsClose1");     
    $("#menuItem2").toggleClass("menuItemsClose2"); 
    $("#menuItem3").toggleClass("menuItemsClose3");
    
     open = false;
  }
  
});
</script>
</body>
    </html>
